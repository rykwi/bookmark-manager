function p(){var t={"[一二三四五六七八九十百千万億兆]":"M","[一-龠々〆ヵヶ]":"H","[ぁ-ん]":"I","[ァ-ヴーｱ-ﾝﾞｰ]":"K","[a-zA-Zａ-ｚＡ-Ｚ]":"A","[0-9０-９]":"N"};this.chartype_=[];for(var a in t){var e=new RegExp;e.compile(a),this.chartype_.push([e,t[a]])}return this.BIAS__=-332,this.BC1__={HH:6,II:2461,KH:406,OH:-1378},this.BC2__={AA:-3267,AI:2744,AN:-878,HH:-4070,HM:-1711,HN:4012,HO:3761,IA:1327,IH:-1184,II:-1332,IK:1721,IO:5492,KI:3831,KK:-8741,MH:-3132,MK:3334,OO:-2920},this.BC3__={HH:996,HI:626,HK:-721,HN:-1307,HO:-836,IH:-301,KK:2762,MK:1079,MM:4034,OA:-1652,OH:266},this.BP1__={BB:295,OB:304,OO:-125,UB:352},this.BP2__={BO:60,OO:-1762},this.BQ1__={BHH:1150,BHM:1521,BII:-1158,BIM:886,BMH:1208,BNH:449,BOH:-91,BOO:-2597,OHI:451,OIH:-296,OKA:1851,OKH:-1020,OKK:904,OOO:2965},this.BQ2__={BHH:118,BHI:-1159,BHM:466,BIH:-919,BKK:-1720,BKO:864,OHH:-1139,OHM:-181,OIH:153,UHI:-1146},this.BQ3__={BHH:-792,BHI:2664,BII:-299,BKI:419,BMH:937,BMM:8335,BNN:998,BOH:775,OHH:2174,OHM:439,OII:280,OKH:1798,OKI:-793,OKO:-2242,OMH:-2402,OOO:11699},this.BQ4__={BHH:-3895,BIH:3761,BII:-4654,BIK:1348,BKK:-1806,BMI:-3385,BOO:-12396,OAH:926,OHH:266,OHK:-2036,ONN:-973},this.BW1__={",と":660,",同":727,B1あ:1404,B1同:542,"、と":660,"、同":727,"」と":1682,あっ:1505,いう:1743,いっ:-2055,いる:672,うし:-4817,うん:665,から:3472,がら:600,こう:-790,こと:2083,こん:-1262,さら:-4143,さん:4573,した:2641,して:1104,すで:-3399,そこ:1977,それ:-871,たち:1122,ため:601,った:3463,つい:-802,てい:805,てき:1249,でき:1127,です:3445,では:844,とい:-4915,とみ:1922,どこ:3887,ない:5713,なっ:3015,など:7379,なん:-1113,にし:2468,には:1498,にも:1671,に対:-912,の一:-501,の中:741,ませ:2448,まで:1711,まま:2600,まる:-2155,やむ:-1947,よっ:-2565,れた:2369,れで:-913,をし:1860,を見:731,亡く:-1886,京都:2558,取り:-2784,大き:-2604,大阪:1497,平方:-2314,引き:-1336,日本:-195,本当:-2423,毎日:-2113,目指:-724,Ｂ１あ:1404,Ｂ１同:542,"｣と":1682},this.BW2__={"..":-11822,11:-669,"――":-5730,"−−":-13175,いう:-1609,うか:2490,かし:-1350,かも:-602,から:-7194,かれ:4612,がい:853,がら:-3198,きた:1941,くな:-1597,こと:-8392,この:-4193,させ:4533,され:13168,さん:-3977,しい:-1819,しか:-545,した:5078,して:972,しな:939,その:-3744,たい:-1253,たた:-662,ただ:-3857,たち:-786,たと:1224,たは:-939,った:4589,って:1647,っと:-2094,てい:6144,てき:3640,てく:2551,ては:-3110,ても:-3065,でい:2666,でき:-1528,でし:-3828,です:-4761,でも:-4203,とい:1890,とこ:-1746,とと:-2279,との:720,とみ:5168,とも:-3941,ない:-2488,なが:-1313,など:-6509,なの:2614,なん:3099,にお:-1615,にし:2748,にな:2454,によ:-7236,に対:-14943,に従:-4688,に関:-11388,のか:2093,ので:-7059,のに:-6041,のの:-6125,はい:1073,はが:-1033,はず:-2532,ばれ:1813,まし:-1316,まで:-6621,まれ:5409,めて:-3153,もい:2230,もの:-10713,らか:-944,らし:-1611,らに:-1897,りし:651,りま:1620,れた:4270,れて:849,れば:4114,ろう:6067,われ:7901,を通:-11877,んだ:728,んな:-4115,一人:602,一方:-1375,一日:970,一部:-1051,上が:-4479,会社:-1116,出て:2163,分の:-7758,同党:970,同日:-913,大阪:-2471,委員:-1250,少な:-1050,年度:-8669,年間:-1626,府県:-2363,手権:-1982,新聞:-4066,日新:-722,日本:-7068,日米:3372,曜日:-601,朝鮮:-2355,本人:-2697,東京:-1543,然と:-1384,社会:-1276,立て:-990,第に:-1612,米国:-4268,"１１":-669},this.BW3__={あた:-2194,あり:719,ある:3846,"い.":-1185,"い。":-1185,いい:5308,いえ:2079,いく:3029,いた:2056,いっ:1883,いる:5600,いわ:1527,うち:1117,うと:4798,えと:1454,"か.":2857,"か。":2857,かけ:-743,かっ:-4098,かに:-669,から:6520,かり:-2670,"が,":1816,"が、":1816,がき:-4855,がけ:-1127,がっ:-913,がら:-4977,がり:-2064,きた:1645,けど:1374,こと:7397,この:1542,ころ:-2757,さい:-714,さを:976,"し,":1557,"し、":1557,しい:-3714,した:3562,して:1449,しな:2608,しま:1200,"す.":-1310,"す。":-1310,する:6521,"ず,":3426,"ず、":3426,ずに:841,そう:428,"た.":8875,"た。":8875,たい:-594,たの:812,たり:-1183,たる:-853,"だ.":4098,"だ。":4098,だっ:1004,った:-4748,って:300,てい:6240,てお:855,ても:302,です:1437,でに:-1482,では:2295,とう:-1387,とし:2266,との:541,とも:-3543,どう:4664,ない:1796,なく:-903,など:2135,"に,":-1021,"に、":-1021,にし:1771,にな:1906,には:2644,"の,":-724,"の、":-724,の子:-1e3,"は,":1337,"は、":1337,べき:2181,まし:1113,ます:6943,まっ:-1549,まで:6154,まれ:-793,らし:1479,られ:6820,るる:3818,"れ,":854,"れ、":854,れた:1850,れて:1375,れば:-3246,れる:1091,われ:-605,んだ:606,んで:798,カ月:990,会議:860,入り:1232,大会:2217,始め:1681,市:965,新聞:-5055,"日,":974,"日、":974,社会:2024,ｶ月:990},this.TC1__={AAA:1093,HHH:1029,HHM:580,HII:998,HOH:-390,HOM:-331,IHI:1169,IOH:-142,IOI:-1015,IOM:467,MMH:187,OOI:-1832},this.TC2__={HHO:2088,HII:-1023,HMM:-1154,IHI:-1965,KKH:703,OII:-2649},this.TC3__={AAA:-294,HHH:346,HHI:-341,HII:-1088,HIK:731,HOH:-1486,IHH:128,IHI:-3041,IHO:-1935,IIH:-825,IIM:-1035,IOI:-542,KHH:-1216,KKA:491,KKH:-1217,KOK:-1009,MHH:-2694,MHM:-457,MHO:123,MMH:-471,NNH:-1689,NNO:662,OHO:-3393},this.TC4__={HHH:-203,HHI:1344,HHK:365,HHM:-122,HHN:182,HHO:669,HIH:804,HII:679,HOH:446,IHH:695,IHO:-2324,IIH:321,III:1497,IIO:656,IOO:54,KAK:4845,KKA:3386,KKK:3065,MHH:-405,MHI:201,MMH:-241,MMM:661,MOM:841},this.TQ1__={BHHH:-227,BHHI:316,BHIH:-132,BIHH:60,BIII:1595,BNHH:-744,BOHH:225,BOOO:-908,OAKK:482,OHHH:281,OHIH:249,OIHI:200,OIIH:-68},this.TQ2__={BIHH:-1401,BIII:-1033,BKAK:-543,BOOO:-5591},this.TQ3__={BHHH:478,BHHM:-1073,BHIH:222,BHII:-504,BIIH:-116,BIII:-105,BMHI:-863,BMHM:-464,BOMH:620,OHHH:346,OHHI:1729,OHII:997,OHMH:481,OIHH:623,OIIH:1344,OKAK:2792,OKHH:587,OKKA:679,OOHH:110,OOII:-685},this.TQ4__={BHHH:-721,BHHM:-3604,BHII:-966,BIIH:-607,BIII:-2181,OAAA:-2763,OAKK:180,OHHH:-294,OHHI:2446,OHHO:480,OHIH:-1573,OIHH:1935,OIHI:-493,OIIH:626,OIII:-4007,OKAK:-8156},this.TW1__={につい:-4681,東京都:2026},this.TW2__={ある程:-2049,いった:-1256,ころが:-2434,しょう:3873,その後:-4430,だって:-1049,ていた:1833,として:-4657,ともに:-4517,もので:1882,一気に:-792,初めて:-1512,同時に:-8097,大きな:-1255,対して:-2721,社会党:-3216},this.TW3__={いただ:-1734,してい:1314,として:-4314,につい:-5483,にとっ:-5989,に当た:-6247,"ので,":-727,"ので、":-727,のもの:-600,れから:-3752,十二月:-2287},this.TW4__={"いう.":8576,"いう。":8576,からな:-2348,してい:2958,"たが,":1516,"たが、":1516,ている:1538,という:1349,ました:5543,ません:1097,ようと:-4258,よると:5865},this.UC1__={A:484,K:93,M:645,O:-505},this.UC2__={A:819,H:1059,I:409,M:3987,N:5775,O:646},this.UC3__={A:-1370,I:2311},this.UC4__={A:-2643,H:1809,I:-1032,K:-3450,M:3565,N:3876,O:6646},this.UC5__={H:313,I:-1238,K:-799,M:539,O:-831},this.UC6__={H:-506,I:-253,K:87,M:247,O:-387},this.UP1__={O:-214},this.UP2__={B:69,O:935},this.UP3__={B:189},this.UQ1__={BH:21,BI:-12,BK:-99,BN:142,BO:-56,OH:-95,OI:477,OK:410,OO:-2422},this.UQ2__={BH:216,BI:113,OK:1759},this.UQ3__={BA:-479,BH:42,BI:1913,BK:-7198,BM:3160,BN:6427,BO:14761,OI:-827,ON:-3212},this.UW1__={",":156,"、":156,"「":-463,あ:-941,う:-127,が:-553,き:121,こ:505,で:-201,と:-547,ど:-123,に:-789,の:-185,は:-847,も:-466,や:-470,よ:182,ら:-292,り:208,れ:169,を:-446,ん:-137,"・":-135,主:-402,京:-268,区:-912,午:871,国:-460,大:561,委:729,市:-411,日:-141,理:361,生:-408,県:-386,都:-718,"｢":-463,"･":-135},this.UW2__={",":-829,"、":-829,"〇":892,"「":-645,"」":3145,あ:-538,い:505,う:134,お:-502,か:1454,が:-856,く:-412,こ:1141,さ:878,ざ:540,し:1529,す:-675,せ:300,そ:-1011,た:188,だ:1837,つ:-949,て:-291,で:-268,と:-981,ど:1273,な:1063,に:-1764,の:130,は:-409,ひ:-1273,べ:1261,ま:600,も:-1263,や:-402,よ:1639,り:-579,る:-694,れ:571,を:-2516,ん:2095,ア:-587,カ:306,キ:568,ッ:831,三:-758,不:-2150,世:-302,中:-968,主:-861,事:492,人:-123,会:978,保:362,入:548,初:-3025,副:-1566,北:-3414,区:-422,大:-1769,天:-865,太:-483,子:-1519,学:760,実:1023,小:-2009,市:-813,年:-1060,強:1067,手:-1519,揺:-1033,政:1522,文:-1355,新:-1682,日:-1815,明:-1462,最:-630,朝:-1843,本:-1650,東:-931,果:-665,次:-2378,民:-180,気:-1740,理:752,発:529,目:-1584,相:-242,県:-1165,立:-763,第:810,米:509,自:-1353,行:838,西:-744,見:-3874,調:1010,議:1198,込:3041,開:1758,間:-1257,"｢":-645,"｣":3145,ｯ:831,ｱ:-587,ｶ:306,ｷ:568},this.UW3__={",":4889,1:-800,"−":-1723,"、":4889,々:-2311,"〇":5827,"」":2670,"〓":-3573,あ:-2696,い:1006,う:2342,え:1983,お:-4864,か:-1163,が:3271,く:1004,け:388,げ:401,こ:-3552,ご:-3116,さ:-1058,し:-395,す:584,せ:3685,そ:-5228,た:842,ち:-521,っ:-1444,つ:-1081,て:6167,で:2318,と:1691,ど:-899,な:-2788,に:2745,の:4056,は:4555,ひ:-2171,ふ:-1798,へ:1199,ほ:-5516,ま:-4384,み:-120,め:1205,も:2323,や:-788,よ:-202,ら:727,り:649,る:5905,れ:2773,わ:-1207,を:6620,ん:-518,ア:551,グ:1319,ス:874,ッ:-1350,ト:521,ム:1109,ル:1591,ロ:2201,ン:278,"・":-3794,一:-1619,下:-1759,世:-2087,両:3815,中:653,主:-758,予:-1193,二:974,人:2742,今:792,他:1889,以:-1368,低:811,何:4265,作:-361,保:-2439,元:4858,党:3593,全:1574,公:-3030,六:755,共:-1880,円:5807,再:3095,分:457,初:2475,別:1129,前:2286,副:4437,力:365,動:-949,務:-1872,化:1327,北:-1038,区:4646,千:-2309,午:-783,協:-1006,口:483,右:1233,各:3588,合:-241,同:3906,和:-837,員:4513,国:642,型:1389,場:1219,外:-241,妻:2016,学:-1356,安:-423,実:-1008,家:1078,小:-513,少:-3102,州:1155,市:3197,平:-1804,年:2416,広:-1030,府:1605,度:1452,建:-2352,当:-3885,得:1905,思:-1291,性:1822,戸:-488,指:-3973,政:-2013,教:-1479,数:3222,文:-1489,新:1764,日:2099,旧:5792,昨:-661,時:-1248,曜:-951,最:-937,月:4125,期:360,李:3094,村:364,東:-805,核:5156,森:2438,業:484,氏:2613,民:-1694,決:-1073,法:1868,海:-495,無:979,物:461,特:-3850,生:-273,用:914,町:1215,的:7313,直:-1835,省:792,県:6293,知:-1528,私:4231,税:401,立:-960,第:1201,米:7767,系:3066,約:3663,級:1384,統:-4229,総:1163,線:1255,者:6457,能:725,自:-2869,英:785,見:1044,調:-562,財:-733,費:1777,車:1835,軍:1375,込:-1504,通:-1136,選:-681,郎:1026,郡:4404,部:1200,金:2163,長:421,開:-1432,間:1302,関:-1282,雨:2009,電:-1045,非:2066,駅:1620,"１":-800,"｣":2670,"･":-3794,ｯ:-1350,ｱ:551,ｸﾞ:1319,ｽ:874,ﾄ:521,ﾑ:1109,ﾙ:1591,ﾛ:2201,ﾝ:278},this.UW4__={",":3930,".":3508,"―":-4841,"、":3930,"。":3508,"〇":4999,"「":1895,"」":3798,"〓":-5156,あ:4752,い:-3435,う:-640,え:-2514,お:2405,か:530,が:6006,き:-4482,ぎ:-3821,く:-3788,け:-4376,げ:-4734,こ:2255,ご:1979,さ:2864,し:-843,じ:-2506,す:-731,ず:1251,せ:181,そ:4091,た:5034,だ:5408,ち:-3654,っ:-5882,つ:-1659,て:3994,で:7410,と:4547,な:5433,に:6499,ぬ:1853,ね:1413,の:7396,は:8578,ば:1940,ひ:4249,び:-4134,ふ:1345,へ:6665,べ:-744,ほ:1464,ま:1051,み:-2082,む:-882,め:-5046,も:4169,ゃ:-2666,や:2795,ょ:-1544,よ:3351,ら:-2922,り:-9726,る:-14896,れ:-2613,ろ:-4570,わ:-1783,を:13150,ん:-2352,カ:2145,コ:1789,セ:1287,ッ:-724,ト:-403,メ:-1635,ラ:-881,リ:-541,ル:-856,ン:-3637,"・":-4371,ー:-11870,一:-2069,中:2210,予:782,事:-190,井:-1768,人:1036,以:544,会:950,体:-1286,作:530,側:4292,先:601,党:-2006,共:-1212,内:584,円:788,初:1347,前:1623,副:3879,力:-302,動:-740,務:-2715,化:776,区:4517,協:1013,参:1555,合:-1834,和:-681,員:-910,器:-851,回:1500,国:-619,園:-1200,地:866,場:-1410,塁:-2094,士:-1413,多:1067,大:571,子:-4802,学:-1397,定:-1057,寺:-809,小:1910,屋:-1328,山:-1500,島:-2056,川:-2667,市:2771,年:374,庁:-4556,後:456,性:553,感:916,所:-1566,支:856,改:787,政:2182,教:704,文:522,方:-856,日:1798,時:1829,最:845,月:-9066,木:-485,来:-442,校:-360,業:-1043,氏:5388,民:-2716,気:-910,沢:-939,済:-543,物:-735,率:672,球:-1267,生:-1286,産:-1101,田:-2900,町:1826,的:2586,目:922,省:-3485,県:2997,空:-867,立:-2112,第:788,米:2937,系:786,約:2171,経:1146,統:-1169,総:940,線:-994,署:749,者:2145,能:-730,般:-852,行:-792,規:792,警:-1184,議:-244,谷:-1e3,賞:730,車:-1481,軍:1158,輪:-1433,込:-3370,近:929,道:-1291,選:2596,郎:-4866,都:1192,野:-1100,銀:-2213,長:357,間:-2344,院:-2297,際:-2604,電:-878,領:-1659,題:-792,館:-1984,首:1749,高:2120,"｢":1895,"｣":3798,"･":-4371,ｯ:-724,ｰ:-11870,ｶ:2145,ｺ:1789,ｾ:1287,ﾄ:-403,ﾒ:-1635,ﾗ:-881,ﾘ:-541,ﾙ:-856,ﾝ:-3637},this.UW5__={",":465,".":-299,1:-514,E2:-32768,"]":-2762,"、":465,"。":-299,"「":363,あ:1655,い:331,う:-503,え:1199,お:527,か:647,が:-421,き:1624,ぎ:1971,く:312,げ:-983,さ:-1537,し:-1371,す:-852,だ:-1186,ち:1093,っ:52,つ:921,て:-18,で:-850,と:-127,ど:1682,な:-787,に:-1224,の:-635,は:-578,べ:1001,み:502,め:865,ゃ:3350,ょ:854,り:-208,る:429,れ:504,わ:419,を:-1264,ん:327,イ:241,ル:451,ン:-343,中:-871,京:722,会:-1153,党:-654,務:3519,区:-901,告:848,員:2104,大:-1296,学:-548,定:1785,嵐:-1304,市:-2991,席:921,年:1763,思:872,所:-814,挙:1618,新:-1682,日:218,月:-4353,査:932,格:1356,機:-1508,氏:-1347,田:240,町:-3912,的:-3149,相:1319,省:-1052,県:-4003,研:-997,社:-278,空:-813,統:1955,者:-2233,表:663,語:-1073,議:1219,選:-1018,郎:-368,長:786,間:1191,題:2368,館:-689,"１":-514,Ｅ２:-32768,"｢":363,ｲ:241,ﾙ:451,ﾝ:-343},this.UW6__={",":227,".":808,1:-270,E1:306,"、":227,"。":808,あ:-307,う:189,か:241,が:-73,く:-121,こ:-200,じ:1782,す:383,た:-428,っ:573,て:-1014,で:101,と:-105,な:-253,に:-149,の:-417,は:-236,も:-206,り:187,る:-135,を:195,ル:-673,ン:-496,一:-277,中:201,件:-800,会:624,前:302,区:1792,員:-1212,委:798,学:-960,市:887,広:-695,後:535,業:-697,相:753,社:-507,福:974,空:-822,者:1811,連:463,郎:1082,"１":-270,Ｅ１:306,ﾙ:-673,ﾝ:-496},this}p.prototype.ctype_=function(t){for(var a in this.chartype_)if(t.match(this.chartype_[a][0]))return this.chartype_[a][1];return"O"};p.prototype.ts_=function(t){return t||0};p.prototype.segment=function(t){if(t==null||t==null||t=="")return[];var a=[],e=["B3","B2","B1"],d=["O","O","O"],c=t.split("");for(f=0;f<c.length;++f)e.push(c[f]),d.push(this.ctype_(c[f]));e.push("E1"),e.push("E2"),e.push("E3"),d.push("O"),d.push("O"),d.push("O");for(var H=e[3],x="U",b="U",_="U",f=4;f<e.length-3;++f){var s=this.BIAS__,C=e[f-3],K=e[f-2],h=e[f-1],O=e[f],I=e[f+1],B=e[f+2],i=d[f-3],n=d[f-2],r=d[f-1],o=d[f],u=d[f+1],N=d[f+2];s+=this.ts_(this.UP1__[x]),s+=this.ts_(this.UP2__[b]),s+=this.ts_(this.UP3__[_]),s+=this.ts_(this.BP1__[x+b]),s+=this.ts_(this.BP2__[b+_]),s+=this.ts_(this.UW1__[C]),s+=this.ts_(this.UW2__[K]),s+=this.ts_(this.UW3__[h]),s+=this.ts_(this.UW4__[O]),s+=this.ts_(this.UW5__[I]),s+=this.ts_(this.UW6__[B]),s+=this.ts_(this.BW1__[K+h]),s+=this.ts_(this.BW2__[h+O]),s+=this.ts_(this.BW3__[O+I]),s+=this.ts_(this.TW1__[C+K+h]),s+=this.ts_(this.TW2__[K+h+O]),s+=this.ts_(this.TW3__[h+O+I]),s+=this.ts_(this.TW4__[O+I+B]),s+=this.ts_(this.UC1__[i]),s+=this.ts_(this.UC2__[n]),s+=this.ts_(this.UC3__[r]),s+=this.ts_(this.UC4__[o]),s+=this.ts_(this.UC5__[u]),s+=this.ts_(this.UC6__[N]),s+=this.ts_(this.BC1__[n+r]),s+=this.ts_(this.BC2__[r+o]),s+=this.ts_(this.BC3__[o+u]),s+=this.ts_(this.TC1__[i+n+r]),s+=this.ts_(this.TC2__[n+r+o]),s+=this.ts_(this.TC3__[r+o+u]),s+=this.ts_(this.TC4__[o+u+N]),s+=this.ts_(this.UQ1__[x+i]),s+=this.ts_(this.UQ2__[b+n]),s+=this.ts_(this.UQ3__[_+r]),s+=this.ts_(this.BQ1__[b+n+r]),s+=this.ts_(this.BQ2__[b+r+o]),s+=this.ts_(this.BQ3__[_+n+r]),s+=this.ts_(this.BQ4__[_+r+o]),s+=this.ts_(this.TQ1__[b+i+n+r]),s+=this.ts_(this.TQ2__[b+n+r+o]),s+=this.ts_(this.TQ3__[_+i+n+r]),s+=this.ts_(this.TQ4__[_+n+r+o]);var M="O";s>0&&(a.push(H),H="",M="B"),x=b,b=_,_=M,H+=e[f]}return a.push(H),a};const l={Kanji:/^[々〇〻\u2E80-\u2FDF\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFAFF]|[\uD840-\uD87F][\uDC00-\uDFFF]+$/,NumeralKanji:/^[一二三四五六七八九十百千万億兆]+$/,Hiragana:/^[ぁ-ん]+$/,Katakana:/^[ァ-ヴーｧ-ﾝﾞﾟ]+$/,Alphabet:/^[a-zA-Zａ-ｚＡ-Ｚ]+$/,Numeral:/^[0-9０-９]+$/},S=t=>l.Kanji.test(t),j=t=>l.NumeralKanji.test(t),D=t=>l.Hiragana.test(t),P=t=>l.Katakana.test(t),$=t=>l.Alphabet.test(t),z=t=>l.Numeral.test(t),Z=[{fn:S,rep:"C"},{fn:j,rep:"S"},{fn:D,rep:"H"},{fn:P,rep:"K"},{fn:$,rep:"A"},{fn:z,rep:"N"}],L=t=>Z.reduce((a,e)=>e.fn(t)?e.rep:a,"O"),g=t=>a=>{const e=(d,c)=>d===1?t[a+c]||"":e(d-1,c)+e(1,c+(d-1));return e},U=(t,a)=>{const e=[];for(let d=t;d<a;d++)e.push(d);return e},Y=t=>1/(1+Math.exp(-1*t)),A=(t,a)=>(t^a)>>>0,X=(t,a)=>(t&a)>>>0,q=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],R=t=>{let a=4294967295;const e=new Uint8Array(t);for(let d=0;d<e.byteLength;d++)a=A(a>>>8,q[X(A(a,e[d]),255)]);return A(a,4294967295)},G=t=>a=>(R(new TextEncoder().encode(a))%t).toString(16).toLowerCase(),J=.5,T={config:{nBuckets:262144,size:3,offset:3,scale:1e3},weight:{type:{1:{"-3":{C:86,K:39,A:125,N:103,B:-73,D:-1,E:-90},"-2":{N:358,O:-75,D:-73,E:-1},"-1":{S:651,C:40,H:-508,O:-400,E:-73},0:{C:237,H:2347,O:1581},1:{S:-30,C:-704,O:2188,Z:224},2:{S:0,C:204,A:-63,O:-1,Y:224},3:{H:44,N:147,O:-10,Z:-72,X:224}},2:{"-3":{CH:10,HC:78,KK:165,BD:-73,DE:-1},"-2":{HC:153,HO:-23,KC:208,NC:-159,NN:148,OH:0,DE:-73},"-1":{SC:26,CC:853,CN:-311,CO:750,HC:-17,HO:1542,KK:204,AA:478,AO:-208,NC:858,NN:-357,NO:-31,OA:-35,OO:894},0:{SC:-401,CS:-552,CC:-1815,CN:171,CO:720,HH:-3399,HN:8421,KH:9425,KK:-10891,AC:805,AH:327,AA:-3803,NC:-336,NN:-3235,OC:1211,OH:501,OO:-4040},1:{CC:321,CO:-160,KH:-13044,OC:4,ZY:224},2:{HK:-1,KK:8,YX:224}},3:{"-3":{CCC:316,CCH:-35,HHH:292,HOC:145,HOH:-175,KKC:2,KKK:255,NCN:-203,OCC:-62,BDE:-73},"-2":{SCC:-4,CCC:-345,CCH:459,CCO:155,CHH:732,HCC:358,HHH:534,HHO:420,HOH:-591,KHC:-22,KKK:705,AAA:72,NCC:-83,NCN:-107,OCC:131,OCH:-163,OHH:-5},"-1":{SCC:283,CCS:-345,CCH:870,CCK:-1126,CCO:247,CHC:-927,CHH:669,CHN:8835,HCC:-698,HCH:-1216,HCN:725,HHC:150,HHH:-66,HNN:-2984,KCC:-472,KKH:11749,KKK:908,KOK:-2409,AAA:-1543,AOA:-322,NCC:746,NCH:788,NCN:-486,NNN:-2,OCC:-217,OCH:-655,OCN:388,OHC:0,OHH:-412,OAA:-6,OOO:-61},0:{SCC:-176,CCC:285,CCH:-52,CCK:-87,CHH:-704,HCC:1613,HHC:-55,KCC:-90,KCH:84,KHH:6955,KKH:-14071,KKK:5059,KOK:-2315,AAA:-66,AOA:-1259,NCN:-43,NNC:-7229,NNN:-208,OCC:67},1:{CCC:-359,CCH:235,CCO:69,CHC:34,CKK:-162,HHC:-211,HHH:364,HHK:-2,HHO:167,KHH:-6718,KKK:784,NNC:-301,OCC:11,ZYX:224}}},hash:{1:{"-3":{"5a92":-90,a098:-60,cf31:-73,"16a1d":0,"1bf4a":250,"2755a":0,28187:-192,"36a04":-1,"3900e":-11,"3a93d":-415},"-2":{"353b":-1,"5a92":-1,a098:-185,16481:-239,19034:-13,25417:41,"2585d":0,28187:-301,"36a04":-73,"3dc1f":204},"-1":{"353b":-740,3695:-65,"5a92":-73,"74df":0,"83c4":145,a098:-192,a429:0,cdac:-423,"157b9":-109,16481:-680,19034:21,"19c16":-400,"1b3f8":2006,"1bf4a":-901,"206fe":174,"2152a":-113,"2178a":-222,"23eba":-350,25417:396,28229:180,"2aef9":114,"2af2e":-423,"2ecb3":10,"2fb50":-19,"3024d":0,"319cd":-299,34449:339,34509:4,34630:257,"3900e":12,"394bf":171,"3d03d":487,"3d1ea":-576,"3d393":1,"3dc1f":619,"3f118":-736},0:{1667:-765,"183c":4001,"353b":438,"371d":-533,"542d":32,"59d8":-49,"74df":-1159,7771:14,"7bf3":68,"806a":-1226,8764:448,"8d9f":-103,a098:1831,a429:189,cdac:4162,cf45:1445,d0e4:1,e0ab:474,e17c:-414,e587:0,"1271c":-116,16481:671,"184ff":-217,19034:161,"19c16":11555,"1b3f8":-485,"1b7ee":399,"1b8d3":124,"1bb04":-1036,"1bf4a":8956,"1d26f":22,"1ecca":-277,"206fe":-150,"215f3":86,"2178a":1867,"2244d":-261,"238f4":394,25417:-1292,"26fbc":23,"274e5":-679,28187:115,28229:1545,"2aef9":-3861,"2b3af":-82,"2ecb3":368,30603:28,"328aa":907,"33a9e":947,34449:-27,"345f6":0,34630:-168,"3817a":-244,"38e48":36,"3900e":773,"394bf":468,"3a93d":809,"3d1ea":1438,"3dc1f":-2113,"3dd5f":225,"3f118":-2566,"3fced":-1246,"3fd0d":0},1:{f20:-554,1667:-1376,"183c":557,"244f":-504,"353b":1777,"3a80":-184,5767:224,"580f":-3866,"59d8":-1220,"76a6":-925,7895:0,"792a":499,"83c4":-2879,8764:354,"8d9f":-1529,a098:2740,a429:956,bdce:-390,bede:357,cdac:360,cf45:1708,e17c:-2210,e242:-6,10597:-264,"10a1b":850,"1249b":-384,"1271c":-18580,"157b9":-39,"15a8b":741,16481:2401,19034:2069,"19c16":1530,"19d61":0,"1bb04":-2232,"1bd33":-2423,"1bf4a":13687,"1e617":112,"1fcd7":-4962,20311:1025,"20de5":-224,"2152a":-380,"215f3":-1190,"2178a":-43779,"2244d":-113,"22a6f":5,"238f4":-653,"23bca":-806,"23eba":-695,"24a51":-804,25417:1793,"274e5":118,27910:-1378,28050:-2071,"28fdc":-1055,"29ab9":-142,"2af2e":973,"2ecb3":-8687,"305ad":-614,"3255f":830,"328aa":2761,"33a9e":427,34449:-213,"34d65":-121,"364bb":292,"3817a":1244,"3833b":23,"38d21":0,"3900e":2337,"39e55":-131,"3a65f":2,"3a93d":-2185,"3b0fc":-1239,"3b22a":-9,"3bd09":1256,"3d03d":22,"3d1ea":2051,"3d393":-711,"3d511":0,"3dc1f":398,"3f118":832,"3fc75":2,"3fced":2525,"3fe94":-2285},2:{f20:-145,"353b":119,"59d8":143,"74df":244,"792a":-23,cdac:-177,e17c:283,"106dd":224,16481:-348,"184ff":-8,19034:267,"1b7ee":-203,"1bb04":501,"1bf4a":-145,"1e2f9":163,"20de5":-211,"2178a":197,21806:-325,"219b9":0,23501:-398,"23eba":-911,26458:89,"2ecb3":-80,"328aa":-71,"33a9e":-205,34449:28,"3d1ea":-29,"3fced":282},3:{"183c":-564,5767:-72,"792a":6,cdac:412,"1271c":151,16481:-31,"1b111":-4,21806:78,"2364b":224,"23eba":-833,"2ecb3":65,"3900e":-14,"3a93d":-495,"3dda0":0}},2:{"-3":{"10ce0":0,"17db9":0,"1c4ea":0,"1e501":-1322,"1fb90":0,"2190f":0,"22de1":-1,33238:0,"34c04":1387,"356c6":0,"3baf1":-73},"-2":{"21c8":203,ad00:0,f3ce:57,"159c6":0,"16fab":-91,"1d279":0,"22de1":-81,25424:0,"28c6e":-339,"2c552":0,"2d7c9":0,36264:-12,"369e1":0,39545:0},"-1":{"21c8":-505,7473:873,a50f:0,dd0c:0,f3ce:472,"13b7f":0,18738:-4,"197be":627,"1c06d":0,"1cf23":493,"1e54a":435,"21bac":0,"24ca7":-456,28008:-363,"2ae60":475,"2fd84":0,30239:0,32806:275,"36ef7":0,39334:0,"3b5e9":0,"3c196":390,"3ca75":0,"3cba2":0,"3cdcc":-122,"3ef8f":-403},0:{"167b":-58,"21c8":-4261,"34ae":647,"508b":-2429,7473:-480,bc2a:0,c3af:-223,d793:0,e98f:0,ec66:-3884,ed42:236,f3ce:-2708,"11b00":3580,"11bd5":0,12122:-977,"1246c":0,"129b8":0,13455:0,"1440c":455,"1482a":-1121,"1487f":-124,"161ed":-546,"164d9":0,"16f5f":-29,19215:-395,"197be":650,"1b57b":-4388,"1c00f":39,"1cf0a":0,"1cf23":-4628,"1d62b":1428,"1e34f":-2630,"1e4ca":0,"21cd1":-3514,"2499e":37,"289f7":-801,"28c6e":-110,"2a6a2":0,"2ae60":245,"2b1ef":-27,"2c570":0,"2cbde":-896,"2d9d5":-1,"2ea4c":0,"2fbe3":0,"2ff65":0,"30e87":-465,"32b7a":0,"32ec3":0,"3311b":-7386,"339e7":151,"344d5":0,"356fb":-593,36264:-2124,"399bc":-3824,"3b99a":0,"3c196":440,"3cdcc":0,"3ef0a":0},1:{"167b":-572,3826:-3877,"4cad":0,"7a9f":-539,a153:665,be59:452,f3ce:1553,faa4:0,"10e08":0,11569:381,11941:1574,"11b00":616,"16efe":-1,"17e39":0,"197be":2983,"19d6d":0,"1bab9":60,"1cf23":2859,"1f9cf":0,"2068a":0,"21cd1":425,"24e71":199,"2544f":581,"2549e":0,"289f7":2461,"2ae60":-2323,"2b4e1":3494,"2e033":0,"31d2a":2423,"3311b":1154,35463:393,"388ed":0,"399bc":1085,"3b623":0,"3c196":481,"3c89c":0,"3fdbd":0},2:{"2d24":222,"1149d":985,17420:0,"197be":336,"19bd4":0,25627:0,"2b1ef":-475,"2d94a":0,"3e185":401}},3:{"-3":{bfa2:-72},"-2":{"8dcb":-7,"38afb":-411},"-1":{879:-493,bba3:-222,"1604f":-1,18934:-1,"359f0":-1415,"3fb76":-1500},0:{10615:-418,"359f0":-2722,"3c742":2648},1:{"34daf":221,"3526b":427,"359f0":0,"3ef72":213}}},distance:-140,bias:147}},m=["B","D","E","F","G","I","J","L","M","P","Q","R","T","U","V","W","X","Y","Z"],V=(t,a,e)=>{const d=m.slice(0,e),c=m.slice().reverse().slice(0,e),H=G(t);return x=>{const b=x.normalize(),_=[...b],f=g([...d,...b.toLowerCase(),...c]),s=g([...d,..._.map(L),...c]);return _.map((C,K)=>{const h=K+e,O=f(h),I=s(h);return U(1,a+1).reduce((B,i)=>U(-1*e,e+1+1-i).reduce((n,r)=>{const o=I(i,r),u=H(O(i,r));return Object.assign(Object.assign({},n),{features:[...n.features,{kind:"type",size:i,offset:r,value:o},{kind:"hash",size:i,offset:r,value:u}]})},B),{char:C,features:[]})})}},w=(t,a)=>{const{bias:e}=t;return d=>{const c=d.features.reduce((x,b)=>{var _,f;return x+(((f=(_=t[b.kind][b.size])===null||_===void 0?void 0:_[b.offset])===null||f===void 0?void 0:f[b.value])||0)},0),H=d.distance*t.distance;return Y((e+c+H)/a)}},{weight:y,config:{scale:E}}=T,W=(t,a)=>{const e=w(t,a);return(d,c=.5)=>d.reduce((H,x)=>{const b=e(Object.assign(Object.assign({},x),{distance:H.distance})),f=b>c?0:H.distance+1;return{value:[...H.value,b],distance:f}},{value:[],distance:0}).value};W(y,E);const t1=(t,a)=>{const e=W(t,a);return(d,c=J)=>e(d,c).map(H=>H>c)},e1=t1(y,E),{nBuckets:a1,size:d1,offset:s1}=T.config,c1=(t,a,e)=>{const d=V(t,a,e);return c=>{const H=d(c);return e1(H).reduce((x,b,_)=>(x[x.length-1]+=H[_].char,b&&x.push(""),x),[""]).filter(x=>!!x)}},f1=c1(a1,d1,s1);new p;function k(t){return f1(t)}function F(t){const a={},e=t.length;return t.forEach(d=>a[d]=(a[d]||0)+1),Object.keys(a).forEach(d=>a[d]/=e),a}function b1(t){const a={},e=t.length;t.forEach(c=>{Object.keys(c).forEach(H=>a[H]=(a[H]||0)+1)});const d={};return Object.keys(a).forEach(c=>{d[c]=Math.log((e+1)/(1+a[c]))+1}),d}function v(t,a){const e={};return Object.keys(a).forEach(d=>{e[d]=(t[d]||0)*a[d]}),e}function H1(t,a){let e=0,d=0,c=0;return new Set([...Object.keys(t),...Object.keys(a)]).forEach(x=>{const b=t[x]||0,_=a[x]||0;e+=b*_,d+=b*b,c+=_*_}),d&&c?e/(Math.sqrt(d)*Math.sqrt(c)):0}function Q(t,a){const e=[];if(t.children){const d=t.children.map(x=>x.title).join(""),c=k(d);console.log(`フォルダ「${t.title}」のトークン:`,c);const H=F(c);a.push(H),e.push({id:t.id,title:t.title,tf:H,tfidf:{}}),t.children.forEach(x=>{x.children&&e.push(...Q(x,a))})}return e}async function x1(t,a,e){var I,B;if(t.action!=="BOOKMARK_MANAGER")return;console.log(`メッセージを受信: ${t.action}`);const c=(await chrome.tabs.query({active:!0,currentWindow:!0}))[0];if(!(c!=null&&c.id)){e({error:"アクティブなタブが見つかりません"});return}const H=await chrome.scripting.executeScript({target:{tabId:c.id},func:()=>{var i,n;return{title:document.title,body:((n=(i=document.body)==null?void 0:i.innerText)==null?void 0:n.slice(0,1e3))||""}}}),x=`${(I=H[0].result)==null?void 0:I.title} ${(B=H[0].result)==null?void 0:B.body}`,b=k(x);console.log("ページのトークン:",b);const _=F(b),f=await chrome.storage.local.get(["idf","folders"]);let s=f.idf,C=f.folders||[];{const i=await chrome.bookmarks.getTree(),n=[];C=Q(i[0],n),console.log(`処理したフォルダ数: ${C.length}`),console.log("フォルダ一覧:",C.map(r=>r.title)),s=b1(n),C.forEach(r=>r.tfidf=v(r.tf,s)),await chrome.storage.local.set({idf:s,folders:C})}console.log("idf vector:",s);const K=v(_,s),h=[];C.forEach(i=>{const n=H1(K,i.tfidf);h.push({folder:i,score:n})});const O=h.sort((i,n)=>n.score-i.score).slice(0,3);console.log("上位3つのフォルダ:",O.map(i=>({title:i.folder.title,score:i.score}))),O.length>0?e({folders:O.map(({folder:i,score:n})=>({id:i.id,title:i.title,score:n}))}):e({error:"適切なフォルダが見つかりませんでした"})}chrome.runtime.onMessage.addListener((t,a,e)=>(x1(t,a,e),!0));
//# sourceMappingURL=background.js.map
