document.addEventListener("DOMContentLoaded",async()=>{const t=await chrome.tabs.query({active:!0,currentWindow:!0});if(t.length===0){a("アクティブなタブが見つかりません");return}const n=t[0];o("ページを分析中!");try{const e=await chrome.runtime.sendMessage({action:"SUGGEST_FOLDERS",payload:{title:n.title}});if(console.log("バックグラウンドスクリプトからの応答:",e),!e){a("バックグラウンドスクリプトからの応答がありません");return}e.result&&e.result.length>0?d(e.result,n):o("適切なフォルダが見つかりませんでした")}catch(e){console.error("エラーが発生しました:",e),a("ページの分析中にエラーが発生しました")}});function o(t){const n=document.getElementById("status");n&&(n.textContent=t)}function a(t){o(`エラー: ${t}`)}function d(t,n){const e=document.getElementById("folderList");e&&(e.innerHTML="",o("推奨フォルダ:"),t.forEach(s=>{const r=document.createElement("div");r.className="folder-item",r.dataset.folderId=s.folderId,r.innerHTML=`
      <span class="folder-name">${s.name}</span>
    `,r.addEventListener("click",async()=>{try{await chrome.bookmarks.create({parentId:s.folderId,title:n.title,url:n.url}),o(`「${s.name}」にブックマークしました`),e.innerHTML="",setTimeout(()=>{window.close()},3e3)}catch(c){console.error("ブックマーク作成中にエラーが発生しました:",c),a("ブックマークの作成中にエラーが発生しました")}}),e.appendChild(r)}))}
//# sourceMappingURL=popup.js.map
