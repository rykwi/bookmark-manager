document.addEventListener("DOMContentLoaded",async()=>{const t=await chrome.tabs.query({active:!0,currentWindow:!0});if(t.length===0){s("アクティブなタブが見つかりません");return}const r=t[0];a("ページを分析中!");try{const e=await chrome.runtime.sendMessage({action:"BOOKMARK_MANAGER"});if(console.log("バックグラウンドスクリプトからの応答:",e),!e){s("バックグラウンドスクリプトからの応答がありません");return}if(e.error){s(e.error);return}e.folders&&e.folders.length>0?d(e.folders,r):a("適切なフォルダが見つかりませんでした")}catch(e){console.error("エラーが発生しました:",e),s("ページの分析中にエラーが発生しました")}});function a(t){const r=document.getElementById("status");r&&(r.textContent=t)}function s(t){a(`エラー: ${t}`)}function d(t,r){const e=document.getElementById("folderList");e&&(e.innerHTML="",a("推奨フォルダ:"),t.forEach(n=>{const o=document.createElement("div");o.className="folder-item",o.dataset.folderId=n.id;const c=Math.round(n.score*100);o.innerHTML=`
      <span class="folder-name">${n.title}</span>
      <span class="similarity-score">${c}%</span>
    `,o.addEventListener("click",async()=>{try{await chrome.bookmarks.create({parentId:n.id,title:r.title,url:r.url}),a(`「${n.title}」にブックマークしました`),e.innerHTML="",setTimeout(()=>{window.close()},3e3)}catch(i){console.error("ブックマーク作成中にエラーが発生しました:",i),s("ブックマークの作成中にエラーが発生しました")}}),e.appendChild(o)}))}
//# sourceMappingURL=popup.js.map
